<?php

namespace AppBundle\Repository\Army;

/**
 * OptionsRepository.
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class EquipementRepository extends \Doctrine\ORM\EntityRepository
{
    public function findByRace($race)
    {
        $qb = $this->createQueryBuilder('e');

        $qb->innerJoin('e.units', 'eq')
            ->addSelect('eq')
            ->innerJoin('eq.unit', 'u')
            ->addSelect('u')
            ->where('u.race = :race')
            ->setParameter('race', $race);

        return $qb;
    }
    public function findByFigurine($unit)
    {
        $qb = $this->createQueryBuilder('e');

        $qb->innerJoin('e.units', 'eq')
            ->addSelect('eq')
            ->where('eq.unit = :unit')
            ->setParameter('unit', $unit);

        return $qb;
    }
}
