{% extends 'AppBundle::layout.html.twig' %}

{% form_theme form 'form/fieldsFigurine.html.twig' %}

{% block title %}Ajout d'une figurine {% endblock %}

{% block body %}
	<div class="well">
		<h2 class="text-center">Rajout d'une figurine pour l'armée {{ armyName }}</h2>
		{{ form_start(form) }}
		{{ form_errors(form) }}

		<div class="form-group">
			{{ form_label(form.figurine,'Figurine à ajouter :',{'label_attr':{'class': 'col-sm-2 control-label'}})}}
			<div class="col-sm-10">
				{{ form_widget(form.figurine,{'attr':{'class':'form-control figurines', 'value': 'Choix de la figurine'}}) }}
			</div>
			{{ form_errors(form.figurine) }}
		</div>

		<div class="form-group">
			{{ form_label(form.equipements, form.equipements.vars.label, {'label_attr': {'class': 'col-sm-3 control-label'}}) }}
			<div class="col-sm-9 row">
                {% for equipement in form.equipements %}
                    {#{% if loop.index == 14 %}#}
                        {#{{ dump(equipement) }}#}
                    {#{% endif %}#}

					<div class="col-sm-4 equipements" {% for key, value in equipement.vars.attr  if key != 'class'%}{{ key }}="{{ value }}" {% endfor %}>
						<label for="{{ equipement.vars.id }}" class="label-checkbox">
							<input type="checkbox" name="{{ equipement.vars.full_name }}" id="{{ equipement.vars.id }}" value="{{ equipement.vars.value }}" {% if equipement.vars.checked == true %}checked{% endif %} >
							{{ equipement.vars.label }}
						</label>
					</div>
                {% endfor %}
			</div>
		</div>
		<br>
		{#<ul class="photos" data-prototype="{{ form_widget(form.photos.vars.prototype)|e }}">#}
            {#{% for photo in form.photos %}#}
                {#<li>{{  form_row(photo) }}</li>#}
            {#{% endfor %}#}
        {#</ul>#}

		<div class="form-group">
			{{ form_label(form.files, form.files.vars.label, {'label_attr': {'class': 'col-sm-3'}}) }}
			<div class="col-sm-5">
				{{ form_widget(form.files, {'attr': {'class': 'form-control file', 'mutliple': 'multiple'}}) }}
			</div>
		</div>
		<div class="text-center">
			{{ form_row(form.save,{'attr':{'class': 'btn btn-default btn-sm'}}) }}
		</div>

		{{ form_rest(form)}}
		{{ form_end(form)}}

		<div class="text-right">
			<a class="btn btn-default btn-xs" href="{{ path('army_view',{'slug': slug})}}"><i class="glyphicon glyphicon-chevron-left"></i>Retour à l'armée</a>
		</div>
	</div>
{% endblock %}

{% block javascript %}
	{{ parent() }}
	<script>
		$(document).ready(function () {
			hideEquipements();


			$('#figurine_army_figurine').change(function () {
			    	console.log($(this).val())
                    hideEquipements();
                    $.each($('div[data-' + $(this).val()), function () {
                        $(this).show();
                    } )

            })
        })

		function hideEquipements() {
            $.each($('.equipements'),function () {
                $(this).children('label').children('input').prop('checked', false);
                $(this).hide();
            })
        }
	</script>
	{#<script type="text/javascript" src="{{ asset('/public/js/cacheOptionFigurine.js') }}"></script>#}
	<script type="text/javascript" src="{{ asset('/public/js/ajoutPhotoFigurine.js') }}"></script>
{% endblock %}
